<head>
<title>Anigiri</title>
<link rel='stylesheet' type='text/css' href='//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css' />

<meta name='viewport' content='width=device-width, height=device-height'>
</head>

<!--==========================================================================-->
<!--================================ BODY ====================================-->
<!--==========================================================================-->
<body>
    {{#if currentUser}}
        {{> userScreen}}
    {{else}}
        {{> splashScreen}}
    {{/if}}
    {{> loadingScreen}}
</body>
<!--==========================================================================-->
<!--============================= SPLASHSCREEN ===============================-->
<!--==========================================================================-->
<template name='splashScreen'>
<div id='splashScreen' class='screen'>
    <div class='content'>
        <h1>Anigiri.</h1>
        <h2>Never lose track of your anime again.</h2>
        <span id='signin' class='bigbtn'>Login With Facebook</span>
        {{> loginButtons}}
    </div>
</div>
</template>
<!--==========================================================================-->
<!--=============================== USERSCREEN ===============================-->
<!--==========================================================================-->
<template name='userScreen'>
<div id='userScreen' class='screen'>
    {{> sideBar}}
    <div id='page-container'>
        {{#if showDashboardPage}}{{> dashboardPage}}{{/if}}
        {{#if showCollectionPage}}{{> collectionPage}}{{/if}}
        {{#if showDiscoverPage}}{{> discoverPage}}{{/if}}
        {{#if showSocialPage}}{{> socialPage}}{{/if}}
        {{#if showStatisticsPage}}{{> statisticsPage}}{{/if}}
        {{#if showAdminPage}}{{> adminPage}}{{/if}}
    </div>
    {{> infoBar}}
</div>
</template>
<!--==========================================================================-->
<!--============================ LOADINGSCREEN ===============================-->
<!--==========================================================================-->
<template name='loadingScreen'>
<div id='loadingScreen'></div>
</template>
<!--==========================================================================-->
<!--=============================== SIDEBAR ==================================-->
<!--==========================================================================-->
<template name='sideBar'>
<div id='sideBar'>
    <div id='corner'>
        <img src='assets/onigiri_white.png'>
        <h1>anigiri</h1>
    </div>
    <div class='scrollable'>
        {{> searchBar}}
        <div class='section'>
            <h1>Navigation</h1>
            <div class='options'>
                <div class='option' data-page='dashboard'><i class='fa fa-user'></i><span>Dashboard</span></div>
                <div class='option' data-page='collection'><i class='fa fa-th-large'></i><span>Collection</span></div>
                <div class='option' data-page='discover'><i class='fa fa-globe'></i><span>Discover</span></div>
                <div class='option' data-page='social'><i class='fa fa-users'></i><span>Social</span></div>
                <div class='option' data-page='statistics'><i class='fa fa-bar-chart-o'></i><span>Statistics</span></div>
                <div class='option' data-page='admin'><i class='fa fa-wrench'></i><span>Admin</span></div>
            </div>
        </div>
    </div>
    {{> account}}
</div>
</template>
<!--==========================================================================-->
<!--============================== SEARCHBAR =================================-->
<!--==========================================================================-->
<template name='searchBar'>
<div id='searchBar'>
    <i class='fa fa-search'></i>
    <input id='searchInput' type='text' placeholder='Search for an anime' />
</div>
</template>
<!--==========================================================================-->
<!--=============================== ACCOUNT ==================================-->
<!--==========================================================================-->
<template name='account'>
<div id='account'>
    <img id='account-portrait' src='{{userPortrait}}' />
    <div id='account-text'>
        <div id='account-name'>{{currentUser.profile.name}}</div>
        <div id='signout'><i class='fa fa-sign-out'></i><span>Sign Out</span></div>
    </div>
</div>
</template>
<!--==========================================================================-->
<!--=========================== DASHBOARDPAGE ================================-->
<!--==========================================================================-->
<template name='dashboardPage'>
<div id='dashboardPage' class='page'>
    {{#if hasSubscriptions}}
    <h1>My Dashboard</h1>
    <div id='dashboardSubscriptions'>
        <div class='section'>
            <h2>Currently Watching <span class='counter'>({{countCurrentlyWatching}})</span></h2>
            <div class='content'>
                {{#if hasCurrentlyWatching}}
                    <div class='gridContainer'>
                    {{#each getCurrentlyWatching}}
                        {{> tinyGridItem this}}
                    {{/each}}
                    </div>
                {{else}}
                <div class='empty-message'>
                    <div class='valigner'>
                        You're not currently watching any animes.
                    </div>
                </div>
                {{/if}}
            </div>
        </div>
        <!--
        Unwatched episodes of animes that you are currently following
        Recommendations given to you by your friends
        Your top rated animes
        Currently active animes
        -->
    </div>
    {{else}}
    <div class='welcome-message'>
        <div class='valigner'>
            <img class='logo' src='assets/onigiri.png' />
            <div class='title'>Welcome to Anigiri, <span>{{userFirstName}}</span>!</div>
            <p>
                Start subscribing to anime to begin tracking and sharing your watching experience.<br/>
            </p>
            <div class='redirect-btn bigbtn'>Start Now</div>
        </div>
    </div>
    {{/if}}
</div>
</template>
<!--==========================================================================-->
<!--========================== COLLECTIONPAGE ================================-->
<!--==========================================================================-->
<template name='collectionPage'>
<div id='collectionPage' class='page'>
    {{#if hasSubscriptions}}
    <h1>My Collection</h1>
    <div id='collectionFilters'></div>
    <div id='collectionGrid'>
        {{#each getSubscriptions}}
            {{> gridItem this}}
        {{/each}}
    </div>
    {{else}}
    <div class='empty-message'>
        <div class='valigner'>
            <p>
            You don't have any anime subscriptions yet.<br/>
            <span class='accent'>Start tracking your favourite animes now!</span>
            </p>
            <div class='redirect-btn bigbtn'>Discover</div>
        </div>
    </div>
    {{/if}}
</div>
</template>
<!--==========================================================================-->
<!--============================ DISCOVERPAGE ================================-->
<!--==========================================================================-->
<template name='discoverPage'>
<div id='discoverPage' class='page'>
    <h1>Discover</h1>
</div>
</template>
<!--==========================================================================-->
<!--============================= SOCIALPAGE =================================-->
<!--==========================================================================-->
<template name='socialPage'>
<div id='socialPage' class='page'>

    <h1>
        <span>{{{title}}}</span>
        <div id='friendSearchBar'>
            <i class='fa fa-search'></i>
            <input id='friendSearchInput' type='text' placeholder='Search for a user...' />
        </div>
    </h1>


    {{#if isFriendProfile}}
    <span>{{firstName}}'s Profile</span>
    {{else}}
        {{#if hasFriends}}
        SOCIAL PAGE: LIST ALL FRIENDS HERE
        {{else}}
        <div class='empty-message'>
            <div class='valigner'>
                <p>
                You don't have any friends on Anigiri yet.<br/>
                <span class='accent'>Start sharing your favourite animes now!</span>
                </p>
            </div>
        </div>
        {{/if}}
    {{/if}}
</div>
</template>
<!--==========================================================================-->
<!--============================ DISCOVERPAGE ================================-->
<!--==========================================================================-->
<template name='statisticsPage'>
<div id='statisticsPage' class='page'>
    {{#if hasSubscriptions}}
    <h1>My Statistics</h1>
    statistics page
    {{else}}
    <div class='empty-message'>
        <div class='valigner'>
            <p>
            You don't have any anime subscriptions yet.<br/>
            <span class='accent'>Start tracking your favourite animes now!</span>
            </p>
            <div class='redirect-btn bigbtn'>Discover</div>
        </div>
    </div>
    {{/if}}
</div>
</template>
<!--==========================================================================-->
<!--============================= ADMINPAGE ==================================-->
<!--==========================================================================-->
<template name='adminPage'>
<div id='adminPage' class='page'>
    <h1>Administrator Panel</h1>
    
    <h2>Summary</h2>
    <table>
        <tr>
            <th>Total Animes</th>
            <th>Total ANN Info</th>
            <th>Total HB Info</th>
            <th>Total Covers</th>
            <th>Total Songs</th>
        </tr>
        <tr>
            <td>{{{getTotalAnimes}}}</td>
            <td>{{{getTotalANN}}}</td>
            <td>{{{getTotalHBI}}}</td>
            <td>{{{getTotalCovers}}}</td>
            <td>{{{getTotalSongs}}}</td>
        </tr>
    </table>
    <div class='button-group'>
        <span id='fetchAnimesBtn' class='button'>Fetch Animes</span>
        <span id='deleteAnimesBtn' class='button'>Delete Animes</span>
        <span id='deleteSongsBtn' class='button'>Delete Songs</span>
    </div>
</div>
</template>
<!--==========================================================================-->
<!--============================== INFOBAR ===================================-->
<!--==========================================================================-->
<template name='infoBar'>
<div id='infoBar'>
    <div class='header'>
        <div class='left'>
            <div class='title'>{{getTitle}}</div>
            <div class='type'>{{getType}}</div>
        </div>
        <div class='right'>
            <i class='close-btn fa fa-times-circle'></i>
        </div>
    </div>
    <div id='navbar'>
        <span class='navitem' data-subpage='overview'>Overview</span>
        <span class='navitem' data-subpage='activity'>Activity</span>
        <span class='navitem' data-subpage='music'>Music</span>
        <span class='navitem' data-subpage='social'>Social</span>
    </div>
    <div class='body'>
        {{#if showOverviewSubpage}}{{> overviewSubpage}}{{/if}}
        {{#if showActivitySubpage}}{{> activitySubpage}}{{/if}}
        {{#if showMusicSubpage}}{{> musicSubpage}}{{/if}}
        {{#if showSocialSubpage}}{{> socialSubpage}}{{/if}}
    </div>
    {{> loadingSubpage}}
</div>
</template>
<!--==========================================================================-->
<!--========================== OVERVIEWSUBPAGE ===============================-->
<!--==========================================================================-->
<template name='overviewSubpage'>
<div id='overviewSubpage' class='subpage'>
{{#with getAnimeData}}
    <div class='top'>
        {{#if isSubscribed}}
        <i class='subscribed fa fa-bookmark'></i>
        {{/if}}
        {{#if poster}}
        <img class='poster' src='{{poster}}' />
        {{/if}}
        <div class='primInfo'>
            {{#if startDate}}
            <div class='field'>
                <span class='label'>{{startDateLabel}}</span>
                <span class='value'>{{startDate}}</span>
            </div>
            {{/if}}
            {{#if endDate}}
            <div class='field'>
                <span class='label'>Ended On</span>
                <span class='value'>{{endDate}}</span>
            </div>
            {{/if}}
            {{#if showStatus}}
            <div class='field'>
                <span class='label'>Status</span>
                <span class='value'>{{status}}</span>
            </div>
            {{/if}}
            {{#if showEpisodes}}
            <div class='field'>
                <span class='label'>Episodes</span>
                <span class='value'>{{{numEpisodes}}}</span>
            </div>
            {{/if}}
            {{#if runningTime}}
            <div class='field'>
                <span class='label'>Length</span>
                <span class='value'>{{runningTime}}</span>
            </div>
            {{/if}}
            {{#if isSubscribed}}
            <div class='field'>
                <span class='label'>Progress</span>
                <span class='value'>{{{progress}}}</span>
            </div>
            <div class='field'>
                <span class='label'>Rating</span>
                <span class='value'><span class='rating'>{{{rating}}}</span></span>
            </div>
            {{/if}}
        </div>
    </div>
    {{#if plot}}
    <div class='plot'>
        {{plot}}
    </div>
    {{/if}}
    {{#if genres}}
    <div class='genres'>
        <div class='title'>Genres</div>
        <div class='list'>{{genres}}</div>
    </div>
    {{/if}}
    {{#if themes}}
    <div class='themes'>
        <div class='title'>Themes</div>
        <div class='list'>{{themes}}</div>
    </div>
    {{/if}}
{{/with}}
</div>
</template>
<!--==========================================================================-->
<!--========================== ACTIVITYSUBPAGE ===============================-->
<!--==========================================================================-->
<template name='activitySubpage'>
<div id='activitySubpage' class='subpage'>
{{#if isSubscribed}}
{{#with getSubscription}}
    <div class='section'>
        <h1>Progress</h1>
        <div class='content'>
            {{{progress}}}
        </div>
    </div>
    {{#if showEpisodes}}
    <div class='section'>
        <h1>Episodes</h1>
        <div class='content'>
            {{#if showEpisodeControls}}
            <div class='episodeControls'>
                <i class='epCountControl epCountUp fa fa-chevron-circle-up'></i>
                <i class='epCountControl epCountDown fa fa-chevron-circle-down'></i>
            </div>
            {{/if}}
            <div class='episodeCount'>
                {{{episodes}}}                
            </div>
        </div>
    </div>
    {{/if}}
    <div class='section'>
        <h1>Rating</h1>
        <div class='content'>
            {{{rating}}}
        </div>
    </div>

    <div class='unsubscribe-btn'>Unsubscribe</div>

    <!-- subscription status -->
    <!-- progress -->
    <!-- episodes -->
    <!-- rating -->
{{/with}}
{{else}}
    <div class='empty-message'>
        <div class='valigner'>
            <p>
                You are not currently subscribed.<br/>
                <span class='accent'>Would you like to start following this anime?</span>
            </p>
            <div class='subscribe-btn'>Subscribe Now</div>
        </div>
    </div>
{{/if}}
</div>
</template>
<!--==========================================================================-->
<!--============================ MUSICSUBPAGE ================================-->
<!--==========================================================================-->
<template name='musicSubpage'>
<div id='musicSubpage' class='subpage'>
{{#if hasSongs}}
{{#with getSongData}}
    {{#if getOpeningThemes}}
        <h1>Opening Themes</h1>
        <div class='song-list'>
        {{#each getOpeningThemes}}
            <div class='song'>
                <div class='num'>{{num}}</div>
                <div class='group'>
                    <div class='title'>{{song}}</div>
                    <div class='artist'>{{artist}}</div>
                </div>
                <div class='episodes'>{{{displayEpisodes episodes}}}</div>
            </div>
        {{/each}}
        </div>
    {{/if}}
    {{#if getEndingThemes}}
        <h1>Ending Themes</h1>
        <div class='song-list'>
        {{#each getEndingThemes}}
            <div class='song'>
                <div class='num'>{{num}}</div>
                <div class='group'>
                    <div class='title'>{{song}}</div>
                    <div class='artist'>{{artist}}</div>
                </div>
                <div class='episodes'>{{{displayEpisodes episodes}}}</div>
            </div>
        {{/each}}
        </div>
    {{/if}}
    {{#if getInsertThemes}}
        <h1>Insert Themes</h1>
        <div class='song-list'>
        {{#each getInsertThemes}}
            <div class='song'>
                <div class='num'>{{num}}</div>
                <div class='group'>
                    <div class='title'>{{song}}</div>
                    <div class='artist'>{{artist}}</div>
                </div>
                <div class='episodes'>{{{displayEpisodes episodes}}}</div>
            </div>
        {{/each}}
        </div>
    {{/if}}
{{/with}}
{{else}}
    <div class='empty-message'>
        <div class='valigner'>
            <p>There are no songs associated with this anime.</p>
        </div>
    </div>
{{/if}}
</div>
</template>
<!--==========================================================================-->
<!--============================ SOCIALSUBPAGE ===============================-->
<!--==========================================================================-->
<template name='socialSubpage'>
<div id='socialSubpage' class='subpage'>
{{#if hasFriends}}

{{else}}
    <div class='empty-message'>
        <div class='valigner'>
            <p>
                You don't have any friends on Anigiri.<br/>
                <span class='accent'>Would you like to add your friends?</span>
            </p>
            <div class='addfriends-btn'>Add Friends Now</div>
        </div>
    </div>
{{/if}}
</div>
</template>
<!--==========================================================================-->
<!--=========================== LOADINGSUBPAGE ===============================-->
<!--==========================================================================-->
<template name='loadingSubpage'>
<div id='loadingSubpage'>
    <img src='assets/loading_cat_2.gif' />
</div>
</template>
<!--==========================================================================-->
<!--============================== GRIDITEM ==================================-->
<!--==========================================================================-->
<template name='gridItem'>
<span class='gridItem {{progress this}}' data-annId='{{annId}}'>
    <div class='cover'>
        <img src='{{poster this}}' />
    </div>
    <div class='title'>{{{title this}}}</div>
    {{#if showEpisodes this}}
    <div class='episodes'>{{{subbedEpisodes this}}}</div>
    {{/if}}
    <div class='rating'>{{{rating this}}}</div>
</span>
</template>
<!--==========================================================================-->
<!--============================== TINYGRIDITEM ==============================-->
<!--==========================================================================-->
<template name='tinyGridItem'>
<span class='tinyGridItem {{progress this}}' data-annId='{{annId}}'>
    <div class='cover'>
        <img src='{{poster this}}' />
    </div>
    <div class='mask'></div>
    <div class='maskcontent'>
        <div class='title'>{{{title this}}}</div>
        {{#if showEpisodes this}}
        <div class='episodes'>{{{subbedEpisodes this}}}</div>
        {{/if}}
        <div class='rating'>{{{rating this}}}</div>
    </div>
    <div class='hoverTarget'></div>
</span>
</template>